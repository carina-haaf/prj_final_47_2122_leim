%%________________________________________________________________________
%% LEIM | PROJETO
%% 2022 / 2013 / 2012
%% Modelo para relatório
%% v04: alteração ADEETC para DEETC; outros ajustes
%% v03: correção de gralhas
%% v02: inclui anexo sobre utilização sistema controlo de versões
%% v01: original
%% PTS / MAR.2022 / MAI.2013 / 23.MAI.2012 (construído)
%%________________________________________________________________________




%%________________________________________________________________________
\chapter{Introdução}
\label{ch:introducao}
%%________________________________________________________________________

Para que a atividade desportiva  de um atleta, numa determinada modalidade, melhore é necessário que este seja monitorizado de uma perspetiva externa. Para esse efeito, é necessário que o atleta seja supervisionado durante a sua atividade física, ou que a última seja registada e posteriormente analisada (registo em papel ou em vídeo).

A anotação de eventos sonoros em vídeo consiste no processo de análise do áudio extraído de um vídeo previamente gravado, no sentido de recolher informações relativas a possíveis eventos relevantes. Este processo, constitui uma tarefa complexa, já que envolve o processamento sobre séries temporais, a partir das quais se podem extrair características e identificar os eventos. Embora esse processamento possa ter aplicações nas mais variadas componentes, este trabalho destina-se apenas à análise da componente desportiva de padel, no sentido de fornecer a atletas e/ou treinadores um complemento no processo de treino. Neste sentido, os eventos sonoros a considerar são batidas de bola em raquetes de padel \cite{courel2019exploring}. A figura que se segue, corresponde à raquete e bola utilizadas no desporto de padel:

\begin{figure}[h]
   \centering
   \includegraphics[width=2cm]{./padel_court_racket_version}
\caption{Raquete e bola de padel}
\label{fig:raqueteeboladepadel}
\end{figure}

Uma figura com mais detalhe encontra-se disponível no Capítulo \ref{ch:umDetalheAdicional}, na qual se observam as dimensões do campo onde esta modalidade desportiva é realizada. O desporto de padel pode ser praticado em ambiente interior (\textit{indoor}) ou exterior (\textit{outdoor}). No entanto, este trabalho analisa apenas vídeos em ambiente \textit{indoor}.

É ainda importante referir que, dada a complexidade de todo o processamento a realizar, bem como o volume de dados e o custo computacional associado, o primeiro será realizado em modo \textit{offline}.


%%________________________________________________________________________
\section{Motivação}
\label{sec:motivacao}
%%________________________________________________________________________

A aplicação em desenvolvimento implica que se implemente um sistema onde a máquina é capaz de reconhecer batidas de bola. No entanto, a forma como uma máquina reconhece um som difere de como esse mesmo som é percecionado pelo ouvido humano. De acordo com \cite{national2004hearing}, o ouvido humano consegue fazer a distinção entre sons, considerando as características dos sons emitidos: duração, intensidade, tom, entre outras.  Pelo que, é necessário proporcionar à máquina a capacidade de reconhecer batidas de bola de forma semelhante à humana. Neste sentido, o que se pretende, é utilizar a máquina para simular o ouvido humano. Para esse efeito, far-se-á uso de aprendizagem automática. 

%%A aprendizagem automática permite aplicar algoritmos aos dados recebidos pela máquina, e reconhecer nestes, padrões identificativos de batidas de bola. Neste sentido, o reconhecimento de padrões nos dados constitui uma forma de a máquina aprender a identificar os eventos relevantes ou batidas de bola. %%

A aprendizagem automática permite aplicar algoritmos aos dados recebidos pela máquina, e reconhecer nestes as batidas de bola.


Antes do processo de aprendizagem, não existindo dados relativos aos eventos pretendidos, ou que estejam etiquetados nas condições desejadas, procedeu-se à construção de um \textit{dataset} de raiz.

Neste sentido, pretende-se desenvolver uma ferramenta que auxilie na atividade desportiva do atleta ou na monitorização de quem o treina. A aplicação processa o vídeo introduzido, realiza um processamento interno e devolve uma análise intensiva dos períodos onde existem eventos que possam interessar aos utilizadores, como por exemplo, períodos onde existem mais batidas de bola. Esta aplicação disponibiliza ainda uma interface, que permite que o utilizador participe no processo de anotação dos eventos (validando os resultados devolvidos pelo classificador), o que poderá contribuir numa perspetiva futura, para aumentar o \textit{dataset} e melhorar a construção do modelo.



%%________________________________________________________________________
\section{Principais Contributos}
\label{sec:principaiscontributos}
%%________________________________________________________________________

Os contributos do sistema em desenvolvimento dividem-se em três componentes: a criação do \textit{dataset}; a construção de um modelo; elaboração de uma interface que auxilia no processo de aumento do \textit{dataset}. Nesta secção será feita uma descrição geral dessas três componentes.

Os dados serão colocados numa estrutura de dados denominada \textit{dataset}. O processo de construção do \textit{dataset} envolve os seguintes passos:

\begin{itemize}
\item
Extração do áudio a partir do vídeo -- resume-se à conversão do vídeo no áudio correspondente; 

\item
Anotação dos eventos relevantes presentes no áudio -- refere-se à etiquetação de batidas de bola no áudio obtido no ponto anterior; 

\item
Extração das características do áudio -- refere-se à obtenção de padrões no áudio que possam identificar potenciais batidas de bola;

\item
Junção dos dados resultantes dos dois pontos anteriores.
\end{itemize}



O \textit{dataset} é introduzido num algoritmo de dados que identifica batidas de bola. O processo de construção do modelo pode ser descrito da seguinte forma:

\begin{itemize}
\item
Escolha do algoritmo de aprendizagem automática -- escolha do algoritmo que melhor se adequa ao reconhecimento de batidas de bola;

\item
Escolha dos hiper-parâmetros que produzem os melhores resultados no treino do modelo;

\item
Aplicação de validação cruzada, no sentido de avaliar o desempenho do modelo em construção, fazendo uso de todo o \textit{dataset} disponível.
\end{itemize}


O sistema em desenvolvimento permitirá também que o utilizador valide os resultados devolvidos pelo classificador, o que poderá constribuir para melhorar a qualidade do próprio modelo e do \textit{dataset}:

\begin{itemize}
\item
Disponibilizar numa interface, os resultados (em termos de eventos) retornados pelo classificador, evidenciando na série temporal onde ocorrem os eventos correspondentes a batidas de bola;

\item
Nessa mesma interface disponibilizar a opção de validar os eventos considerados pelo modelo como sendo ou não batidas de bola.
\end{itemize}


%%________________________________________________________________________
\section{Validação e Testes}
\label{sec:validacaoetestes}
%%________________________________________________________________________

Validação e testes sobre o classificador: avaliação do classificador (validação cruzada)
Validação e testes sobre a ferramenta final (testes de usabilidade)

Falar um pouco sobre os resultados obtidos em termos de percentagens e a forma como o sistema se comporta face a novos dados de input.

Fazer uma apreciação global dos resultados alcançados (como está no Resumo e Abstract).


%%________________________________________________________________________
\section{Estrutura do Relatório}
\label{sec:estruturadorelatorio}
%%________________________________________________________________________

O relatório está organizado da seguinte forma:

(A descrição dos capítulos não precisa de ser muito detalhada. Deve se ser o mais resumida possível.)

\begin{itemize}
\item
O Capítulo 1 é introduzida a intenção de utilizar a aprendizagem automática para reconhecer padrões identificativos de batidas de bola em jogos/ treinos de padel. Neste capítulo, são também enunciados os principais contributos da aplicação em desenvolvimento. No final, é realizada uma apreciação global dos resultados obtidos.

\item
O Capítulo 2 descreve e faz referência a trabalhos relacionados com o trabalho corrente. Estes trabalhos que foram sendo analisados durante o desenvolvimento do trabalho e baseiam-se também no uso da inteligência artificial para reconhecer eventos em modalidades desportivas.

\item
O Capítulo 3 visa apresentar uma análise geral dos requisitos do sistema e a abordagem considerada para desenvolver a aplicação.

\item
(Falar do capítulo 4)

\item
(Falar do capítulo 5)

\item
(Falar do capítulo 6)
\end{itemize}



%%________________________________________________________________________
\chapter{Fundamentos}
\label{ch:fundamentos}
%%________________________________________________________________________

Neste capítulo serão abordados os conceitos de carácter teórico, que sustentam o trabalho realizado.


%%________________________________________________________________________
\section{Conceitos de Processamento de Sinais}
\label{sec:processamentodesinal}
%%________________________________________________________________________

De acordo com \cite{sampaio2006analise}, um sinal corresponde a uma grandeza física que varia ao longo do tempo. Um sinal pode também ser descrito como uma série temporal. Em termos matemáticos, um sinal varia em função de uma  ou mais variáveis, que podem ser contínuas (valores contínuos) ou discretas (valores discretos). Neste sentido, podemos ter dois tipos de sinais: contínuos ou discretos. Neste trabalho, serão analisados apenas sinais discretos, uma vez que se pretende realizar processamento sobre áudio, que foi previamente amostrado numa determinada frequência (a abordar na secção seguinte, ).
O presente trabalho também efetuará a análise de sinais no domínio do tempo e no domínio da frequência. 


%%________________________________________________________________________
\subsection{Amostragem}
\label{sec:amostragem}
%%________________________________________________________________________

O processo de amostragem refere-se à conversão de um sinal contínuo, num sinal discreto. Este algoritmo escolhe pontos equi-espaçados do sinal contínuo para gerar os pontos do sinal discreto \cite{eng_libretexts_sampling}. O sinal (discreto) obtido evolui, no domínio do tempo, em função de amostras ou valores discretos, e não de valores contínuos. 

O intervalo entre as amostras denomina-se período de amostragem e é dado em segundos(s). O inverso deste valor corresponde à frequência de amostragem, e refere-se ao número de amostras que ocorre no sinal a cada segundo. A frequência de amostragem é dada em Hertz(Hz). Neste algoritmo de amostragem, é removida informação do sinal original (contínuo), que em parte pode ser recuperada no processo inverso com o auxílio da interpolação ou reconstrução do sinal \cite{eng_libretexts_reconstruction}. O ouvido humano deteta sons na gama de frequências compreendida entre 20Hz e 20kHz. Neste sentido e de acordo com o teorema de \textit{Nyquist} \cite{evianyquist}, é necessário que a frequência de amostragem dos sons que chegam ao aparelho auditivo humano sejam amostrados a uma frequencia duas vezes igual ou superior a 20kHz. A frequência de amostragem a ser considerada neste projeto é 44100Hz, que é o valor padrão, tendo em conta a gama de frequência do ouvido humano. 


%%________________________________________________________________________
\subsection{Transformada de Fourier}
\label{sec:transformadadefourier}
%%________________________________________________________________________

A transformada de Fourier ou Fourier Transform (FT), é uma função matemática que decompõe um sinal nas várias frequências ou sinusóides constituintes \cite{SEMMLOW201281}. Assim, o sinal de entrada é um sinal no domínio do tempo, ao passo que o sinal de saída é um sinal no domínio da frequência ou espetro. Um caso particular da transformada de Fourier é a transformada de Fourier a curto prazo (STFT), que divide o sinal em grupos de amostras sobre os quais aplica a transformada de Fourier. A transformada de Fourier é útil para verificar, por exemplo, em que zonas do espetro, existe mais ou menos energia concentrada.


%%________________________________________________________________________
\section{Conceitos de Aprendizagem Automática}
\label{sec:aprendizagemauto}
%%________________________________________________________________________

A aprendizagem automática ou \textit{Machine Learning} (ML) é ramo da inteligência artificial, que se refere à capacidade que os sistemas computacionais adquirem para realizar determinadas tarefas de forma automática \cite{janiesch2021machine}. Esses sistemas aprendem a resolver uma determinada tarefa, recorrendo à análise de padrões existentes em dados específicos do problema a resolver.  Ao analisarem esses dados, é construído um modelo, que, a grosso modo, corresponde ao \aspas{cérebro} do sistema computacional, e o auxilia na resolução da tarefa, para a qual foi designado.


De acordo com \cite{sah2020machine}, existem três tipos de aprendizagem automática:

\begin{itemize}
\item
Aprendizagem Supervisionada -- tipo de aprendizagem em que os dados de \textit{input} utilizados para o processo de treino do algoritmo, contêm as características e a classe correspondente;

\item
Aprendizagem Não Supervisionada -- tipo de aprendizagem em que os dados de \textit{input} utilizados para o processo de treino do algoritmo, contêm apenas as características;

\item
Aprendizagem por Reforço -- tipo de aprendizagem utilizado quando o sistema computacional tem como objetivo realizar uma tarefa que envolve uma sequência de decisões. O sistema ganha reforços positivos ou negativos, mediante a ação realizada.

\end{itemize}

No caso deste trabalho, a aprendizagem automática irá permitir aplicar algoritmos aos dados recebidos pela máquina, e reconhecer nestes, padrões identificativos de batidas de bola. Pelo que, o reconhecimento de padrões nos dados constitui uma forma de a máquina aprender a identificar os eventos relevantes ou batidas de bola. O tipo de aprendizagem automática a considerar será a supervisionada.


%%________________________________________________________________________
\subsection{\textit{Dataset}}
\label{sec:dataset}
%%________________________________________________________________________

Um \textit{dataset} corresponde a um conjunto de dados, que é utilizado para treinar ou ensinar algoritmos de inteligência artificial a resolver tarefas \cite{digital_house_2022}. Um \textit{dataset} é constituído por características e classes. Esta estrutura de dados é organizada em forma de tabela (com colunas e linhas). Cada linha corresponde a um exemplo ou observação, ao passo que cada uma das colunas (à exceção de uma delas, que corresponde à classe) representa uma característica.
 

%%________________________________________________________________________
\subsection{Características}
\label{sec:caracteristicas}
%%________________________________________________________________________

As características correspondem a colunas no \textit{dataset} e representam os dados de \textit{input} utilizados para o treino do algoritmo ou modelo. 

Neste trabalho, pretende-se extrair a partir do áudio, as seguintes características: deteção de picos (\textit{Onset}) e o valor eficaz (RMS).

O \textit{Onset} divide-se em duas componentes: a deteção do início (\textit{Onset Detect}) e o fluxo espetral (\textit{Spectral Flux}). A primeira componente, tal como o nome indica, corresponde a detetar o instante em que se inicia um determinado som ou evento \cite{rosao2012onset}. Já a segunda corresponde a verificar variações no espetro do sinal, no sentido de encontrar diferenças entre \textit{frames} consecutivas, o que permite detetar também o início de um evento. O fluxo espetral pode também ser definido como uma medida do quão depressa o espetro de um sinal varia \cite{meyda_2022}.

O valor eficaz ou \textit{Root Mean Square} (RMS) refere-se à energia média concentrada ou à intensidade média do sinal numa determinada \textit{frame}  \cite{room2021audio}.

A figura abaixo constitui uma representação das três características enunciadas:

\begin{figure}[h]
   \centering
   \includegraphics[width=12cm]{./audio_features}
\caption{Características (cima e meio) e áudio (baixo) correspondente.}
\label{fig:features}
\end{figure}

Observando a figura acima, verifica-se que os picos  duas componentes do \textit{Onset}, bem como o RMS estão em concordância com o ínicio dos dos sons no áudio original. O gráfico representativo do fluxo espetral, apresenta picos com maior amplitude, onde o áudio original tem mais intensidade.

As características enunciadas acima podem ser calculadas com o auxílio da biblioteca \href{https://librosa.org/doc/main/index.html#}{ \textbf{librosa} }.

%%________________________________________________________________________
\subsection{Classes}
\label{sec:classes}
%%________________________________________________________________________

Os exemplos ou observações de um \textit{dataset} estão divididos em categorias. Essas categorias denominam-se classes. No caso da aprendizagem supervisionada, o algoritmo vai processando cada uma desses exemplos e faz a análise dos padrões encontrados nos dados. Depois de realizar essa análise, escolhe uma classe (\textit{output}), que pode estar correta ou não em relação à classe de \textit{input} ou real.
Visto que este trabalho se destina ao reconhecimento de batidas de bola, serão apenas consideradas as classes: batida de bola e não batida de bola.


%%________________________________________________________________________
\subsection{Desiquilíbrio no \textit{Dataset}}
\label{sec:desiquilibrionodataset}
%%________________________________________________________________________

O desequilíbrio no \textit{dataset} ocorre quando existe uma diferença considerável no número de exemplos que existe nas categorias do conjunto de dados. Por outras palavras, existe desequilíbrio no dataset quando a distribuição de exemplos pelas classes é desigual \cite{badr2019having}. O processo de treino com dados, cuja distribuição é desigual, pode resultar na criação de um modelo que reconhece melhor certas classes em relação a outras.

Ainda de acordo com \cite{badr2019having} e assumindo que se trata de um problema de classificação binária, é possível solucionar este problema das seguintes formas:

\begin{itemize}
\item
Amostragem -- aumentar o número de exemplos da classe em minoria (sobre-amostragem) ou reduzir o número da classe em maioria (sub-amostragem), no sentido de obter uma proporção de 50:1 entre as classes.

\item
Juntar vários algoritmos de treino -- para obter um desempenho melhor, comparativamente à utilização de apenas um dos algoritmos.
\end{itemize}


%%________________________________________________________________________
\subsection{Hiper-parâmetros}
\label{sec:hiperparametros}
%%________________________________________________________________________

De acordo com \cite{nyuytiymbiy2021parameters}, em aprendizagem automática, um hiper-parâmetro constitui um valor utilizado pelo algoritmo ou modelo para controlar o processo de treino. Os hiper-parâmetros de um modelo não são utilizados diretamente no modelo, mas determinam os parâmetros internos utilizados diretamente. O prefixo \{hiper advém do facto de estes parâmetros serem os escolhidos para definir outros, sugerindo que estão num nível hierárquico superior.


%%________________________________________________________________________
\subsection{Classificação e Validação Cruzada}
\label{sec:validacaocruzada}
%%________________________________________________________________________

O processo de classificação é utilizado pelos algoritmos de \textit{Machine Learning} para atribuir uma classe ou categoria a um conjunto de exemplos \cite{brownlee4types}. Ainda de acordo com a referência anterior, existem três tipos de classificação:

\begin{itemize}
\item
Classificação Multi-Classe -- aplica-se a tarefas em que existem mais do que duas classes. Um exemplo não pode pertencer, simultanemente, a mais do que uma classe.

\item
Classificação Binária -- aplica-se a problemas em que existem apenas duas classes. Um exemplo não pode pertencer, simultanemente, a mais do que uma classe.

\item
Classificação Multi-Label -- aplica-se a problemas em que existem duas classes ou mais classes. Um exemplo pode pertencer, simultanemente, a mais do que uma classe.

\end{itemize}

Neste trabalho, o problema de classificação é binário, já que o sistema computacional deve apenas distinguir eventos que são batidas de bola de eventos que não o são.

Em geral, num problema de classificação, os dados são divididos em treino e teste. O grupo de exemplos de treino é utilizado no processo de aprendizagem ou treino, ao passo que o  grupo de teste é utilizado no processo de classificação. Esta distribuição dos dados pode não ser sufuciente para que o modelo aprenda a generalizar, no caso de ter de analisar dados novos. Como solução, pode ser utilizada a validação cruzada.
 
A validação cruzada é uma técnica utilizada para avaliar o desempenho de um modelo, quando analisa dados novos \cite{mohammed_cv_2020}. 



%%________________________________________________________________________
\subsection{Redes Neuronais}
\label{sec:redesneuronais}
%%________________________________________________________________________

Uma rede neuronal ou \textit{Artificial Neural Network} (ANN) é um algoritmo ou técnica de aprendizagem automática que tem como objetivo imitar o cérebro humano na realização de uma determinada tarefa, simulando a forma como os neurónios comunicam entre si \cite{burnsneural}. 

À semelhança do cérebro humano, o neurónio é a unidade básica da rede neuronal. Um neurónio funciona como uma função que recebe um determinado \textit{input}, processa-o e devolve um \textit{output}. No capítulo \ref{ch:outroDetalheAdicional} encontra-se uma figura ilustrativa de um neurónio consituinte de uma rede neuronal.

Uma rede neuronal está organizada em camadas, que são constituídas por neurónios. A primeira camada ou a camada de \textit{input}, tem a mesma quantidade de neurónios que o número de caracteríticas do \textit{dataset}. A última camada ou a camada de \textit{output}, contém tantos neurónios quanto o número de classes ou categorias.
Entre a camada de \textit{input} e a camada de \textit{output} existem uma ou mais camadas intermédias. A figura \ref{fig:redeneuronal} representa de uma rede neuronal, onde estão delimitadas as ligações entre os vários neurónios constituintes:

\begin{figure}[h]
   \centering
   \includegraphics[width=8cm]{./NN}
\caption{Representação típica de uma rede neuronal.}
\label{fig:redeneuronal}
\end{figure}

O número de camadas, bem como o número de neurónios constituinte devem ser escolhidos com rigor, a fim de garantir que o modelo obtém a melhor classificação possível \cite{krishnandetermine}.

Tal como se verifica na figura \ref{fig:redeneuronal}, quando um neurónio recebe os vários \textit{inputs} (de outros neurónios), associa a cada um destes um peso, que vai atualizando ao longo do processo de aprendizagem \cite{medium_2019}. 

De acordo com \cite{baeldungnn2019}, durante a aprendizagem, os dados propagam-se ao longo da rede neuronal várias vezes. O processo de propagação de todos os dados ao longo da rede neuronal denomina-se época. Neste sentido, uma época corresponde a um ciclo de passagem de todos os dados do \textit{dataset} ao longo da rede neuronal. Uma época é realizada ao longo de várias iterações. Uma iteração é o número de grupos de dados (\textit{batches}), constituintes do \textit{dataset}, necessários para completar uma época. Pelo que, o (\textit{batch}) é o número de exemplos ou observações que atravessam a rede neuronal numa iteração. 


%%________________________________________________________________________
\chapter{Trabalho Relacionado}
\label{ch:trabalhoRelacionado}
%%________________________________________________________________________

Este capítulo faz referência a artigos e outros trabalhos de cariz técnico que se relacionam com o trabalho em desenvolvimento: uso de algoritmos de aprendizagem para reconhecimento de eventos em modalidades desportivas.


No fundo, pegar nos artigos científicos e relacionar/ comparar com o que se pretende no trabalho: tecnologias utilizadas, métodos de desenvolvimento, área a que se aplica (desporto).

Trabalho relacionado aqui \ldots

Aqui terá certamente necessidade de citar (fazer referência) a vários trabalhos anteriormente publicados e que foi analisando ao longo de todo o seu projeto. Esses trabalhos devem ser apresentados com os seguintes objetivos essenciais:
\begin{itemize}
\item
delimitar o contexto onde o seu projeto se insere,

\item
definir claramente os aspetos diferenciadores (inovadores) do seu projeto,

\item
identificar e caracterizar os pressupostos (teóricos ou tecnológicos) em que o projeto se baseia.
\end{itemize}

Cada trabalho a que fizer referência precisa de ser corretamente identificado. Essa identificação depende do tipo de publicação do trabalho. Um trabalho terá sido publicado em revista científica, \eg, \cite{Elzinga_Mills_2011}, outro em ata de conferência internacional, \eg, \cite{Boutilier_et_al_1995}, outro em livro, \eg, \cite{Bellifemine_et_al_2007}, ou apenas em capítulo de livro, \eg, \cite{Wooldridge_2000}, ou pode ainda incluído numa coleção, \eg, \cite{Howard_Matheson_1984} e há também a hipótese de ser uma \aspas{publicação de proveniência diversa}, como no caso em que o \aspas{o sítio na Internet} é a principal forma de publicação, \eg, \cite{Python_2012} e, por fim, a publicação pode ser um relatório técnico, \eg, \cite{Marin_2006}.

Para conseguir lidar de forma adequada com as referências é importante construir um acervo e ter um mecanismo para geração automática (e correta) das referências que vai fazendo ao longo do texto.

Atualmente, as publicações têm também informação sobre o modo como devem ser corretamente citadas; em geral essa informação segue o formato \textsc{Bib}\TeX.

Para fazer referência a um trabalho é necessário seguir as boas regras (sintáticas) para uma citação correta, mas isso não é suficiente; falta a \aspas{semântica}. Ou seja, é também preciso descrever o essencial do trabalho que está a citar. É necessário explicar esse trabalho e enquadrá-lo, no texto, de modo a tornar clara a relação entre esse trabalho e o seu projeto.



%%________________________________________________________________________
\chapter{Modelo Proposto}
\label{ch:modeloProposto}
%%________________________________________________________________________

Neste capítulo, serão descritos os requisitos da ferramenta em desenvolvimento. De seguida, será feita uma descrição de qual a abordagem adotada para desenvolver o sistema. 

%%________________________________________________________________________
\section{Requisitos}
\label{sec:requisitos}
%%________________________________________________________________________

A ferramenta em desenvolvimento destina-se a atletas ou treinadores que tenham como objetivo analisar os treinos. Do ponto de vista do utilizador, pretende-se desenvolver um sistema que reconheça os eventos correspondentes a batidas de bola, e que contribua para auxiliar o processo de classificação.

Os requisitos do sistema podem ser funcionais e não funcionais. Os primeiros, que também podem ser designados por funções de sistema, referem-se a funcionalidades desempenhadas pelo sistema. Neste caso, os requisitos funcionais podem ainda ser divididos em dois grupos:

\begin{itemize}

\item
Grupo das funcionalidades associadas à construção do \textit{dataset};

\item
Grupo das funcionalidades associadas ao processo de classificação.
\end{itemize} 




\bigskip
A tabela \ref{tab:tabelarequisitosfuncdata} contém os requisitos funcionais que dizem respeito à criação do \textit{dataset}:


\clearpage


\begin{table}[h]
		\begin{center}
		
		
				\begin{tabular}{ | l | p{9cm} | l |}
				\hline
				\textbf{Requisito} & \textbf{Função} & \textbf{Categoria} \\ \hline
				R1.1 & Extrair o áudio do vídeo & Invisível \\ \hline
				R1.2 & Anotar as batidas de bola presentes no áudio (A) & Invisível \\ \hline
				R1.3 & Extrair as caracteristicas do áudio (B) & Invisível \\ \hline
				R1.4 & Combinação dos dois conjuntos A e B & Invisível \\ \hline
				\end{tabular}
				
				
		\caption{Requisitos funcionais do sistema em desenvolvimento para a construção do \textit{dataset}.}
		\label{tab:tabelarequisitosfuncdata}
				
		\end{center}
\end{table}	





A tabela \ref{tab:tabelarequisitosfuncclass} contém os requisitos funcionais que dizem respeito ao processo de classificação:
\begin{table}[h]
		\begin{center}
		
		
				\begin{tabular}{ | l | l | l |}
				\hline
				\textbf{Requisito} & \textbf{Função} & \textbf{Categoria} \\ \hline
				R1.1 & Extrair o áudio do vídeo & Invisível \\ \hline
				R1.2 & Extrair as características do áudio & Invisível \\ \hline
				R1.3 & Aplicar o classificador & Invisível \\ \hline
				R1.4 & Apresentar resultados dos eventos etiquetados & Invisível \\ \hline
				\end{tabular}
				
				
		\caption{Requisitos funcionais respeitantes ao processo de classificação.}
		\label{tab:tabelarequisitosfuncclass}
				
		\end{center}
\end{table}	

Note-se que as funcionalidades enunciadas acima constituem grande parte dos contributos deste projeto (referidos na secção \ref{sec:principaiscontributos}).

Os requisitos não funcionais, também designados atributos do sistema, correspondem a algo que o sistema deve realizar. A tabela \ref{tab:tabelarequisitosnaofunc} representa os atributos não funcionais do sistema.



\begin{table}[h]
		\begin{center}
		
		
				\begin{tabular}{ | l | p{6cm} | l |}
				\hline
				\textbf{Atributo} & \textbf{Detalhe/ Restrição Fronteira} & \textbf{Categoria} \\ \hline
				Interação Homem-Máquina & Detalhe \newline Interface fácil de aprender a usar & Obrigatório \\ \hline
				
				\end{tabular}
				
				
		\caption{Requisitos não funcionais do sistema.}
		\label{tab:tabelarequisitosnaofunc}
				
		\end{center}
\end{table}	
\clearpage




%%________________________________________________________________________
\section{Abordagem}
\label{sec:abordagem}
%%________________________________________________________________________


Neste secção será descrita a abordagem utilizada para realizar cada uma das etapas inerentes ao sistema em desenvolvimento. As etapas são as seguintes:

\begin{itemize}

\item
Construção do \textit{dataset};

\item
Construção de um classificador que reconhece batidas de bola;

\item
Criação de uma interface que contribui para aumentar o \textit{dataset}.

\end{itemize} 


%%________________________________________________________________________
\subsection{Construção do \textit{dataset}}
\label{sec:construcaododataset}
%%________________________________________________________________________

Tal como referido anteriormente, pretende-se, realizar processamento \textit{offline} sobre áudio com batidas de bola, e identificar em que instantes temporais estas ocorrem. Para esse efeito, é necessário numa fase inicial, criar um \textit{dataset}. O \textit{dataset} em questão, corresponde a um conjunto de dados com padrões identificativos desses eventos. 

Neste sentido, considerando uma matriz de características, \textit{X}, e o vetor de valores de classes correspondente, \textit{y}, o problema de classificação em questão tem como objetivo obter a função, \textit{f}, tal que:


\begin{equation} 
\label{eq:modelequation}
 f(X)=y
\end{equation}

A função \textit{f} corresponde a um modelo que deve receber a matriz de características e, classificar de maneira correta cada um dos exemplos desse mesmo vetor. Esse modelo é treinado com o \textit{dataset}, que constitui uma forma de permitir que o primeiro seja capaz de reconhecer as batidas de bola.
 
\bigskip
\paragraph{\textbf{Obtenção da matriz de características -- \textit{X}}} \hspace{0pt} \\

%%\noindent%% 
A matriz \textit{X} é constituída por M linhas ou exemplos. Por sua vez, cada exemplo tem N colunas ou características, pelo que a matriz \textit{X} pode ser representada da seguinte forma:
\clearpage

\begin{figure}
\[ 
X_{m,n} = 
 \begin{bmatrix}
  X_{1,1} & X_{1,2} & \cdots & X_{1,n} \\
  \vdots  & \vdots  & \ddots & \vdots  \\
  X_{M,1} & X_{M,2} & \cdots & X_{M,N} 
 \end{bmatrix}
 \]
\caption{Matriz de características.}
\label{fig:matrizfeaturesv1}
\end{figure}

No sentido de obter as características ou padrões presentes no áudio (extraído do vídeo), será realizado um varrimento sobre o mesmo com uma janela fixa, ao longo de várias iterações. A dimensão desta janela é dada pela duração, em segundos, das batidas de bola (a abordar mais à frente). A frequência de amostragem a que o áudio é obtido é de 44100Hz. Pelo que, cada segundo no áudio corresponde a 44100 amostras. Desta forma, caso 


O valor de N na figura \ref{fig:matrizfeaturesv1}, corresponde ao número de características abranjidas pela janela fixa. Este valor pode ser dado pela seguinte expressão:

\begin{equation} 
\label{eq:formulan}
N=\frac{eventLength \times samplingRate}{shiftedSamples}
\end{equation}

onde na equação \textit{eventLength}, corresponde à duração de um evento ou batida de bola, \textit{samplingRate} é a frequência de amostragem (a que os áudios são obtidos), e \textit{shiftedSamples} refere-se ao número de amostras deslizadas a cada iteração do varrimento. Na figura \ref{tab:tabelaparamformuladen}, estão evidenciados os valores:

\begin{table}[h]
		\begin{center}
				\begin{tabular}{ | c | c | c |} \hline
				\textbf{\textit{eventLength}} & \textbf{\textit{shiftedSamples}} & \textbf{\textit{N}} \\ \hline
						0.5 & 1024 & 22 \\ \hline
						0.5 & 2048 & 11 \\ \hline
						0.7 & 1024 & 30 \\ \hline
						0.7 & 2048 & 15 \\ \hline
						1.0 & 1024 & 43 \\ \hline
						1.0 & 2048 & 22 \\ \hline
				\end{tabular}
				
		\caption{Valores de duração (em segundos), amostras delizadas e N a considerar, para um valor de \textit{samplingRate} igual a 44100Hz.}
		\label{tab:tabelaparamformuladen}
				
		\end{center}
\end{table}	

Na tabela imediatamente acima, verificam-se três valores de duração dos eventos (\aspas{\textit{eventLength}}). Este facto pode ser explicado pela variação da duração deste evento ao longo de áudio. Ou seja, podem ser verificadas batidas de bola com diferentes durações no áudio. No Capítulo de \ref{ch:validacaoTestes}, serão verificadas as combinações destes valores que produzem os melhores resultados no modelo. O áudio extraído do vídeo é amostrado a 44100Hz (secção \ref{sec:amostragem}). 

 


%%________________________________________________________________________
\subsection{Construção do classificador}
\label{sec:onstrucaodoclassificador}
%%________________________________________________________________________

(colocar aqui um esquema dos passos no processso de classificação - ver os esquemas feitos pela Soraia)
(Não esquecer que aqui primeiro escolheu-se o classificador, como auxílio do ODM

Analisando os resultados no ODM, optou-se pelas redes redes neuronais

Uso de validação cruzada para avaliar a qualidade do modelo


%%________________________________________________________________________
\subsection{Criação da interface}
\label{sec:criacaodainterface}
%%________________________________________________________________________

(colocar aqui uma imagem correspondente ao mockup correspondente ao design da app)



Aqui explique as formulações, os métodos, os algoritmos e outros contributos que desenvolveu e que considera centrais ao seu trabalho.

Aqui precisa de abordar tudo o que contribui para diferenciar o seu trabalho e que (na sua opinião) deve ser evidenciado e explicado de modo claro.

Lembre-se que a apresentação de um (ou mais) \textbf{exemplo(s) simples} é muito importante para que o leitor consiga seguir e compreender o seu trabalho.

Tenha em atenção que um exemplo acompanhado por figuras ilustrativas será certamente analisado (de modo cuidado) pelos leitores do seu trabalho.

(Deve-se explicar aqui toda a construção pormenorizada do dataset, correto?)

(O processo de reconhecimento de batidas de bola, requer um trabalho adicional correspondente à etiquetação prévia de eventos presentes no áudio. Ou seja, para que a máquina possa aprender o que é uma batida de bola, é necessário que se \aspas{diga} à mesma em que instantes de tempo ocorrem batidas de bola. Assim, esta adquire a capacidade de distinguir eventos correspondentes a batidas de bola, de eventos que não correspondem a batidas de bola.)


